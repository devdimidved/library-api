#Задание

Спроектировать и разработать REST API для будущего приложения согласно следующим требованиям и сценарию:

* Приложение - книжный магазин, предоставляющий электронные книги напрокат.
* Пользователь логинится в приложении с помощью своего логина и пароля. Таблица с пользователями уже заполнена на сервере. После этого он может просматривать список книг (можно ограничиться минимальной информацией: автор, название, стоимость ренты, время истечения подписки).
* Пользователь может арендовать книгу на время. Известно, сколько денег на счету у пользователя и стоимость аренды книги за один месяц. Арендуя книгу, пользователь выбирает длительность периода (в месяцах).
* Пользователю доступен список арендованных книг, напротив каждой из которых указан остаток времени до окончания аренды. Если аренда кончилась, книга не отображается в личном списке.
* Действия просмотра, аренды и отображения списка своих книг недоступны для неавторизованного пользователя. После авторизации пользователю должен приходить от сервера токен (время его валидности не принципиально, он может быть и “вечным”), который обеспечивает валидность дальнейших операций. Во всех запросах кроме логина токен отправляется в заголовке запроса.

Требования и ограничения:
Java/Kotlin, Spring 5, Spring Boot 2, Spring Data JPA, docker-compose будет плюсом.

Придерживаться следует REST-архитектуры, content-type для тела запроса и ответа -- plain-text/json.

#Проверка

- клонировать репозиторий
<code>git clone https://github.com/devdimidved/library-api.git</code>;
- перейти в папку с репозиторием <code>cd library-api</code>;
- запустить приложение командой <code>./mvnw spring-boot:run</code>

При старте приложения в БД создаются записи о трех пользователях с логинами **_john.doe_**, **_sam.fox_** и **_bob.bro_** и одинаковым паролем **_password_**.

Запросы к API недоступны для неавторизованного пользователя.
Для получения токена необходимо выполнить POST-запрос на [http://localhost:8080/oauth/token](), используя _client-id_=_lib-client_ и _password_=_devglan-secret_, а также логин и пароль зарегистрированного пользователя.

Пример:

<code>$ curl lib-client:devglan-secret@localhost:8080/oauth/token -d grant_type=password -d username=bob.bro -d password=password</code> 

В ответ будет получен access-токен, который и следует использовать для дальнейших запросов к API. Пример:

<code>{"access_token":"86a756ab-c2f3-443a-8729-8b311c034a4c","token_type":"bearer","refresh_token":"7938e03f-f7ed-4598-bb9d-706c3e5d3813","expires_in":3599,"scope":"read write trust"}</code>

Доступные end-point-ы:
1. **GET /api/books** - для просмотра списка книг бибилиотеки. С целью "облегчения" запросов список книг предоставляется в постраничном формате: по умолчанию (если не указаны как параметры запроса) номер текущей страницы равен 1 и размер страницы равен 10 книгам.
Желаемые значения номера и размера страницы должны быть явно указаны.  Например, чтобы получить вторую страницу размером 10 необходимо запрос составить как:
<code>/api/books?page=2&size=10</code>.
 2. **GET /api/rents** - для просмотра списка книг, арендованных пользователем.
 3. **POST /api/rents** - для взятия в аренду новой книги. Тело запроса должно содержать идентификатор книги и желаемый срок аренды в месяцах и выглядеть как
 <code>{"bookId":103, "durationMonth":2}</code>.
 
 Примеры запросов (с использованием ранее полученного access-токена):
 * получить список книг (по-умолчанию будут показаны только первые 10 книг в библиотеке)
 
 <code>$ curl http://localhost:8080/api/books -H "Authorization: Bearer 86a756ab-c2f3-443a-8729-8b311c034a4c"</code>
 * получить следующие 10 книг
  
 <code>$ curl "http://localhost:8080/api/books?page=2&size=10" -H "Authorization: Bearer 86a756ab-c2f3-443a-8729-8b311c034a4c"</code>
 
 * получить список книг, находящихся у пользователя в аренде
 
 <code>$ curl http://localhost:8080/api/rents -H "Authorization: Bearer 86a756ab-c2f3-443a-8729-8b311c034a4c"</code>
 
 * взять в аренду книгу с идентификатором 103 сроком на 2 месяца
 
 <code>$ curl http://localhost:8080/api/rents -H 'Content-Type: application/json' -d '{"bookId":103, "durationMonth":2}' -H "Authorization: Bearer 86a756ab-c2f3-443a-8729-8b311c034a4c"</code>